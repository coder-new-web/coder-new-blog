---
title: XSS攻击
date: 2022-03-01
category:
  - 网络与网络安全
tag:
  - XSS与CSRF
  - XSS和CSRF区别
  - XSS危害
---

### XSS简介
XSS全称Cross-site scripting，翻译为跨站脚本攻击。
    
### CSRF简介
CSRF，全称是Cross site request forgery，翻译为跨站请求伪造。

### XSS和CSRF区别
XSS——侧重于脚本，千方百计的注入并执行恶意脚本。
CSRF——不注入恶意脚本，侧重于请求伪造，借刀杀人，在用户不知情的情况下，借用户的名义干坏事。

### XSS攻击危害

1. 窃取cookie
2. 劫持流量导流到自己设定的网站上
3. 插入恶意广告
4. 植入木马获取用户信息等
5. 获取用户信息

### XSS攻击方式

1. url参注入
2. 输入框注入

XSS相对用户来说，一切以输入方式输入都是不安全的。

### XSS分类

1. 反射型

反射过程：浏览器提交恶意代码到服务器-->服务端将恶意代码传回客户端

2. 存储型

存储过程：浏览器提交恶意代码到服务器-->将恶意代码存储到数据库
存储型给用户带来的危害是最大，因为它是最持久的

3. DOM型

恶意代码没有提交到服务端，仅在客户端运行。

#### 反射型和DOM型常用攻击方式
反射型和DOM型主要通过参数的方式注入，引诱用户点击带有恶意代码的链接

#### 反射型和DOM型区别
反射型：服务端返回代码中包含恶意代码
客户端-->服务端-->客户端
DOM型：服务端返回代码是正常的，一直存储在客户端

#### 存储型常用攻击方式
在输入框输入恶意代码，然后点击提交，就会提交到服务端，服务端就会将恶意代码存储在数据库。以后用户每次访问都会拉取到恶意代码并执行，因此给用户带来的危害也是最持久的。

### 如何预防
攻击方式都是先注入再执行，那么防止方式就可以分为防止注入和防止执行。
因此对用户的输入和输出做严格的把控，因此可以对输入进行过滤，对输出进行转义

### 预防可选方案

1. 校验

校验即对格式的校验

2. 过滤

过滤对`<script>`、`<iframe>`等特殊标签。
过去对`onclick`、`onerror`、`onfocus`等js事件属性

3. 编码转义

对要渲染的内容做编码转义，防止执行

4. 限制输入长度
5. cookie设置成http only













